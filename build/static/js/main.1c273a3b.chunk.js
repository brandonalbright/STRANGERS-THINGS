(this.webpackJsonpstrangers_things=this.webpackJsonpstrangers_things||[]).push([[0],{35:function(e,t,n){},38:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(0),r=n(20),a=n.n(r),o=n(26),i=n(3),l=n(10),u=n(6),j=(n(35),n(39)),d=n.n(j);var h=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,c=e.clearToken,r=(e.postList,e.setPostList,e.searchTerm,e.setSearchTerm),a=e.isRecent,o=e.setIsRecent;return Object(s.jsxs)("nav",{className:"header",children:[Object(s.jsx)(l.b,{to:"/",children:Object(s.jsx)("img",{className:"header-logo",src:"https://i.imgur.com/vrQimP1.png",alt:"logo"})}),Object(s.jsxs)("div",{className:"header-search",children:[Object(s.jsxs)("label",{className:"header-checkbox",children:[Object(s.jsx)("input",{type:"checkbox",checked:a,onChange:function(){return o(!a)}}),"Recent Posts Only"]}),Object(s.jsx)("input",{type:"text",className:"header_searchInput",onChange:function(e){return r(e.target.value)},placeholder:"filter posts"}),Object(s.jsx)(d.a,{className:"header-searchIcon"})]}),Object(s.jsx)("div",{className:"headerNav",children:t?Object(s.jsx)(l.b,{to:"/posts",className:"header-link",children:Object(s.jsx)("span",{onClick:function(){c(),n(!1)},className:"headerOpt-line2",children:"Logout"})}):Object(s.jsx)(l.b,{to:"/login",className:"header-link",children:Object(s.jsx)("span",{className:"headerOpt-line2",children:"SignIn/Sign Up"})})}),Object(s.jsxs)("div",{className:"headermessages",children:[Object(s.jsx)(l.b,{to:"/posts",className:"header-link",children:Object(s.jsx)("span",{children:" Posts"})}),t?Object(s.jsx)(l.b,{to:"/createNewPost",className:"header-link",children:Object(s.jsx)("span",{children:"Create New Post"})}):null]}),t?Object(s.jsxs)("div",{className:"header-messages",children:[Object(s.jsx)(l.b,{to:"/message",className:"header-link",children:Object(s.jsx)("span",{children:"Messages"})}),Object(s.jsx)(l.b,{to:"/myposts",className:"header-link",children:Object(s.jsx)("span",{children:"My Posts"})})]}):null]})},b=n(5),p=n.n(b),O=n(9),x="https://strangers-things.herokuapp.com/api/2007-LSU-RM-WEB-PT",g=function(){if(localStorage.getItem("auth-token"))return localStorage.getItem("auth-token");localStorage.removeItem("auth-token")},m=function(){localStorage.removeItem("auth-token")},f=function(e){localStorage.setItem("auth-token",e)};function v(){var e={"Content-Type":"application/json"};return g()&&(e.Authorization="Bearer ".concat(g())),e}var I=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var s,c,r,a,o,i,l=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>2&&void 0!==l[2]&&l[2],c="".concat(x,"/users")+(s?"/register":"/login"),e.next=4,fetch(c,{method:"POST",headers:v(),body:JSON.stringify({user:{username:t,password:n}})});case 4:return r=e.sent,e.next=7,r.json();case 7:if(a=e.sent,o=a.error,i=a.data,!o){e.next=12;break}throw Error(o.message);case 12:return i&&i.token&&f(i.token),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(O.a)(p.a.mark((function e(t,n,s){var c,r,a,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:t,headers:v()},s&&(c.body=JSON.stringify(s)),e.next=4,fetch("".concat(x).concat(n),c);case 4:return r=e.sent,e.next=7,r.json();case 7:if(a=e.sent,o=a.error,i=a.data,!o){e.next=12;break}throw Error(o.message);case 12:return i&&i.token&&f(i.token),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}();n(57);var k=function(e){var t=e.setIsLoggedIn,n=Object(u.f)(),r=Object(c.useState)(""),a=Object(i.a)(r,2),o=a[0],j=a[1],d=Object(c.useState)(""),h=Object(i.a)(d,2),b=h[0],x=h[1],g=Object(c.useState)(null),m=Object(i.a)(g,2),f=m[0],v=m[1];return Object(s.jsxs)("div",{className:"login",children:[Object(s.jsx)("div",{className:"logo-login",children:Object(s.jsx)(l.b,{to:"/",children:Object(s.jsx)("img",{className:"header-logo",src:"https://i.imgur.com/vrQimP1.png",alt:"logo"})})}),Object(s.jsxs)("div",{className:"login-container",children:[Object(s.jsx)("h1",{children:"Sign In"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(s.jsx)("h5",{children:"Email"}),f?Object(s.jsx)("h5",{className:"error",children:f}):null,Object(s.jsx)("input",{type:"text",value:o,onChange:function(e){return j(e.target.value)},placeholder:"username"}),Object(s.jsx)("h5",{children:"Password"}),Object(s.jsx)("input",{type:"password",value:b,onChange:function(e){return x(e.target.value)},placeholder:"password"}),Object(s.jsx)("button",{className:"login-siginbutton",onClick:function(){var e=Object(O.a)(p.a.mark((function e(s){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(o,b);case 3:e.sent,t(!0),n.push("/posts"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),v(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),children:"Sign In"}),Object(s.jsx)("h5",{children:"Have Account? Sign In!"})]}),Object(s.jsx)("button",{className:"login-createbutton",onClick:function(){var e=Object(O.a)(p.a.mark((function e(s){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(o,b,!0);case 3:e.sent,t(!0),n.push("/posts"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),v(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),children:"Create your account"}),Object(s.jsx)("h5",{children:"Don't have account? Sign Up!"})]})]})},S=(n(58),n(80));n(38);var L=function(e){var t=e.addNewPost,n=Object(c.useState)(""),r=Object(i.a)(n,2),a=r[0],o=r[1],l=Object(c.useState)(""),j=Object(i.a)(l,2),d=j[0],h=j[1],b=Object(c.useState)(""),x=Object(i.a)(b,2),g=x[0],m=x[1],f=Object(c.useState)(""),v=Object(i.a)(f,2),I=v[0],k=v[1],S=Object(c.useState)(!1),L=Object(i.a)(S,2),N=L[0],w=L[1],P=Object(u.f)(),C=Object(c.useState)(!1),T=Object(i.a)(C,2),D=T[0],E=T[1];return Object(s.jsx)("div",{id:"form",className:"createNewMessage",children:Object(s.jsxs)("form",{onSubmit:function(){var e=Object(O.a)(p.a.mark((function e(n){var s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(event.preventDefault(),E(!0),0!==d.length){e.next=5;break}return E(!0),e.abrupt("return");case 5:if(0!==a.length){e.next=8;break}return E(!0),e.abrupt("return");case 8:return s={post:{title:d,description:a,price:g,willDeliver:N,location:I}},e.prev=9,e.next=12,y("POST","/posts",s);case 12:c=e.sent,t(c.post),console.log(c),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.error(e.t0);case 20:o(""),m(""),h(""),w(""),k(""),document.getElementById("form").style.display="none",P.push("/posts");case 27:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t){return e.apply(this,arguments)}}(),children:[Object(s.jsx)("h3",{children:"Title:"}),Object(s.jsx)("input",{value:d,onChange:function(e){h(e.target.value)},type:"text"}),D&&0===d.length?Object(s.jsx)("h3",{style:{color:"red"},children:"You need a title"}):null,Object(s.jsx)("h3",{children:"Description:"}),Object(s.jsx)("textarea",{value:a,onChange:function(e){o(e.target.value)},type:"text"}),D&&0===a.length?Object(s.jsx)("h3",{style:{color:"red"},children:"You need a description"}):null,Object(s.jsx)("h3",{children:"Price"}),Object(s.jsx)("input",{value:g,onChange:function(e){m(e.target.value)},type:"text"}),Object(s.jsx)("h3",{children:"Location"}),Object(s.jsx)("input",{placeholder:"location, leave blank for [On Request]",value:I,onChange:function(e){k(e.target.value)},type:"text"}),Object(s.jsx)("h3",{children:"Will Deliver"}),Object(s.jsx)("input",{value:N,onChange:function(e){w(!N)},type:"checkbox"}),Object(s.jsx)("button",{children:"Post It"})]})})},N=(n(59),n(30)),w=n.n(N);var P=function(e){var t=e.postId,n=Object(c.useState)(""),r=Object(i.a)(n,2),a=r[0],o=r[1];return Object(s.jsx)("div",{id:"message-form",className:"new-message",children:Object(s.jsxs)("form",{onSubmit:function(){var e=Object(O.a)(p.a.mark((function e(n){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s={message:{content:a}},e.next=4,y("POST","/posts/".concat(t,"/messages"),s);case 4:e.sent,o(""),document.getElementById("message-form").style.display="none";case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(s.jsx)(w.a,{onClick:function(){document.getElementById("message-form").style.display="none"}}),Object(s.jsx)("textarea",{value:a,onChange:function(e){return o(e.target.value)}}),Object(s.jsx)("button",{children:"Send"})]})})};var C=function(e){var t=Object(c.useState)(e.description||""),n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(e.title||""),l=Object(i.a)(o,2),j=l[0],d=l[1],h=Object(c.useState)(e.price||""),b=Object(i.a)(h,2),x=b[0],g=b[1],m=Object(c.useState)(e.location||""),f=Object(i.a)(m,2),v=f[0],I=f[1],k=Object(c.useState)(e.willDeliver||!1),S=Object(i.a)(k,2),L=S[0],N=S[1],P=Object(u.f)(),C=(e.setPostList,e.updatePost),T=e.postId;return Object(s.jsx)("div",{id:"form",className:"createNewMessage",children:Object(s.jsxs)("form",{onSubmit:function(){var e=Object(O.a)(p.a.mark((function e(t){var n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return event.preventDefault(),n={post:{title:j,description:r,price:x,willDeliver:L,location:v}},e.prev=2,e.next=5,y("PATCH","/posts/".concat(T),n);case 5:s=e.sent,C(s.post),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:a(""),g(""),d(""),N(!1),I(""),document.getElementById("form").style.display="none",P.push("/posts");case 19:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),children:[Object(s.jsx)(w.a,{onClick:function(){document.getElementById("form").style.display="none",P.push("/posts")}}),Object(s.jsx)("h3",{children:"Title:"}),Object(s.jsx)("input",{value:j,onChange:function(e){d(e.target.value)},type:"text"}),Object(s.jsx)("h3",{children:"Description:"}),Object(s.jsx)("textarea",{value:r,onChange:function(e){a(e.target.value)},type:"text"}),Object(s.jsx)("h3",{children:"Price"}),Object(s.jsx)("input",{value:x,onChange:function(e){g(e.target.value)},type:"text"}),Object(s.jsx)("h3",{children:"Location"}),Object(s.jsx)("input",{value:v,onChange:function(e){I(e.target.value)},type:"text"}),Object(s.jsx)("h3",{children:"Will Deliver"}),Object(s.jsx)("input",{value:L,onChange:function(e){N(!L)},type:"checkbox"}),Object(s.jsx)("button",{children:"Update"})]})})};var T=function(e){var t=e.postList,n=e.setPostList,r=e.isLoggedIn,a=e.updatePost,l=(e.addNewPost,Object(c.useState)("")),u=Object(i.a)(l,2),j=u[0],d=u[1],h=Object(c.useState)(""),b=Object(i.a)(h,2),x=b[0],g=b[1];return Object(s.jsx)("div",{id:"posts",children:t.map((function(e,i){return Object(s.jsxs)("div",{id:"post-card",style:{border:e.isAuthor&&r?"5px solid gold":"2px solid rgb(156, 221, 156"},children:[Object(s.jsxs)("div",{className:"card-title",children:[Object(s.jsxs)("h3",{children:[e.title," (",e.location,") [",e.createdAt,"]"]}),Object(s.jsxs)("h3",{children:["Posted Price: ",e.price]})]}),Object(s.jsxs)("div",{className:"descriptions",children:[Object(s.jsxs)("h5",{children:["Description: ",e.description]}),Object(s.jsxs)("h5",{children:["Delivery available: ",e.willDeliver?"YES":"NO"]}),Object(s.jsxs)("h5",{children:["Posted by: ",e.author.username]})]}),j===e._id?Object(s.jsx)(P,{postId:e._id}):null,x===e._id?Object(s.jsx)(C,{title:e.title,description:e.description,price:e.price,location:e.location,willDeliver:e.willDeliver,postId:e._id,updatePost:a}):null,Object(s.jsx)("div",{className:"message",children:e.isAuthor?Object(s.jsxs)(c.Fragment,{children:[Object(s.jsx)(S.a,{onClick:Object(O.a)(p.a.mark((function s(){return p.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,y("DELETE","/posts/".concat(e._id));case 3:s.sent,n(Object(o.a)(t)),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.error(s.t0);case 10:case"end":return s.stop()}}),s,null,[[0,7]])}))),variant:"outlined",color:"secondary",fullWidth:!0,children:"Delete"}),Object(s.jsx)(S.a,{onClick:function(){g(e._id)},variant:"outlined",color:"secondary",fullWidth:!0,children:"Edit"})]}):r?Object(s.jsx)(S.a,{onClick:function(){return d(e._id)},variant:"outlined",color:"primary",fullWidth:!0,children:"Message Seller"}):null})]},i)}))})};n(60);var D=function(e){var t=e.postList;function n(){return n=t.filter((function(e){return e.isAuthor}))}return n().map((function(e,t){return e.messages.length>0?Object(s.jsxs)("div",{id:"message-close",className:"incoming-messages",children:[Object(s.jsxs)("h4",{className:"message-title",children:["Messages for Post: ",e.title]}),e.messages.map((function(e,t){return Object(s.jsxs)("p",{className:"message12",children:[Object(s.jsxs)("strong",{children:[t+1,". "]})," ",e.content," ",Object(s.jsx)("strong",{children:" From: "})," ",e.fromUser.username]},t)})),Object(s.jsx)("button",{onClick:function(){return document.getElementById("message-close").style.display="none"},children:"Cancel"})]},t):null}))};var E=function(e){var t=e.postList,n=e.setPostList,c=e.updatePost;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(T,{postList:t.filter((function(e){return e.isAuthor})),setPostList:n,updatePost:c})})};var R=function(){var e=Object(c.useState)(!!g()),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),j=Object(i.a)(a,2),d=j[0],b=j[1],p=Object(c.useState)(""),O=Object(i.a)(p,2),x=O[0],f=O[1],v=Object(c.useState)(!1),I=Object(i.a)(v,2),S=I[0],N=I[1];function w(){return d.filter((function(e){return e.title.toLowerCase().includes(x.toLowerCase())})).filter((function(e){if(!S)return!0;return Date.parse(e.createdAt)+108e5>=Date.now()})).reverse()}function C(e){var t=d.findIndex((function(t){return t._id===e._id}));if(t>-1){var n=Object(o.a)(d);n[t]=e,b(n)}}return Object(c.useEffect)((function(){y("GET","/posts").then((function(e){var t=e.posts;b(t)})).catch(console.error)}),[n]),Object(s.jsx)(l.a,{children:Object(s.jsx)("div",{children:Object(s.jsxs)(u.c,{children:[Object(s.jsx)(u.a,{path:"/login",children:Object(s.jsx)(k,{setIsLoggedIn:r})}),Object(s.jsxs)(u.a,{path:"/posts",children:[Object(s.jsx)(h,{isLoggedIn:n,setIsLoggedIn:r,clearToken:m,postList:d,setPostList:b,searchTerm:x,setSearchTerm:f,isRecent:S,setIsRecent:N}),Object(s.jsx)(T,{postList:w(),setPostList:b,isLoggedIn:n,updatePost:C})]}),Object(s.jsxs)(u.a,{path:"/comment",children:[Object(s.jsx)(h,{isLoggedIn:n,setIsLoggedIn:r,clearToken:m,searchTerm:x,setSearchTerm:f,isRecent:S,setIsRecent:N}),Object(s.jsx)(P,{postList:d})]}),Object(s.jsxs)(u.a,{path:"/message",children:[Object(s.jsx)(h,{isLoggedIn:n,setIsLoggedIn:r,clearToken:m,searchTerm:x,setSearchTerm:f,isRecent:S,setIsRecent:N}),Object(s.jsx)(D,{postList:d})]}),Object(s.jsxs)(u.a,{path:"/myposts",children:[Object(s.jsx)(h,{isLoggedIn:n,setIsLoggedIn:r,clearToken:m,searchTerm:x,setSearchTerm:f,isRecent:S,setIsRecent:N}),Object(s.jsx)(E,{postList:w(),isLoggedIn:n,setPostList:w,updatePost:C})]}),Object(s.jsxs)(u.a,{path:"/createNewPost",children:[Object(s.jsx)(h,{isLoggedIn:n,setIsLoggedIn:r,clearToken:m,searchTerm:x,setSearchTerm:f,isRecent:S,setIsRecent:N}),Object(s.jsx)(L,{addNewPost:function(e){return b([].concat(Object(o.a)(d),[e]))}})]}),Object(s.jsxs)(u.a,{path:"/",children:[Object(s.jsx)(h,{isLoggedIn:n,setIsLoggedIn:r,clearToken:m,searchTerm:x,setSearchTerm:f,isRecent:S,setIsRecent:N}),Object(s.jsx)(T,{postList:w(),setPostList:b,isLoggedIn:n,updatePost:C})]})]})})})};a.a.render(Object(s.jsx)(R,{}),document.getElementById("app"))}},[[61,1,2]]]);
//# sourceMappingURL=main.1c273a3b.chunk.js.map